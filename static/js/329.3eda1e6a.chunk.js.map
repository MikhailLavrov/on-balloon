{"version":3,"file":"static/js/329.3eda1e6a.chunk.js","mappings":"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","sources":["webpack://on-balloon/./src/components/pages/SearchResultsPage/SearchResultsPage.module.scss?bc1e","components/pages/SearchResultsPage/SearchResultsPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"searchResults\":\"SearchResultsPage_searchResults__uSYBF\",\"searchResults__title\":\"SearchResultsPage_searchResults__title__XpohT\",\"searchResults__innerContainer\":\"SearchResultsPage_searchResults__innerContainer__61A-y\",\"styledBadge\":\"SearchResultsPage_styledBadge__9ovXC\",\"empty\":\"SearchResultsPage_empty__7DE-g\",\"emptyToCatalog__imageWrapper\":\"SearchResultsPage_emptyToCatalog__imageWrapper__PkpI1\",\"empty__text\":\"SearchResultsPage_empty__text__PKSSY\"};","import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { animationData } from '../../../data/catalogData/animationData';\r\nimport { commercialData } from '../../../data/catalogData/commercialData';\r\nimport { balloonsData } from '../../../data/catalogData/balloonsData';\r\nimport { photozoneData } from '../../../data/catalogData/photozoneData';\r\nimport { BreadcrumbsComponent } from '../../BreadcrumbsComponent/BreadcrumbsComponent';\r\nimport c from './SearchResultsPage.module.scss';\r\nimport EMPTY_IMAGE from '../../../assets/empty.webp';\r\nimport { FloatButtonComponent } from '../../FloatButtonComponent/FloatButtonComponent';\r\nimport { BadgedProductCard } from '../../ProductCard/BadgedProductCard';\r\n\r\nconst allData = [...animationData, ...commercialData, ...balloonsData, ...photozoneData];\r\n\r\nconst SearchResultsPage = () => {\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const query = queryParams.get('q');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' }); \r\n    \r\n    const lowerQuery = query && query.toLowerCase();\r\n    const words = lowerQuery && lowerQuery.split(/\\s+/); // Разделение запроса на отдельные слова\r\n    \r\n    const filteredResults = allData.filter(item => {\r\n      const { article, title, description } = item;\r\n      \r\n      const lowerTitle = title && title.toLowerCase();\r\n      const lowerDescription = description && description.toLowerCase();\r\n    \r\n      // Проверяем, содержатся ли все слова из запроса в артикуле\r\n      const containsWholeArticle = words.some(word =>\r\n        word.length > 3 && article && article.toLowerCase() === word\r\n      );\r\n  \r\n      // Проверяем, содержатся ли оба слова из запроса в имени или описании\r\n      const containsBothWords = words.some(word =>\r\n        word.length > 2 && ((lowerTitle && lowerTitle.includes(word)) || (lowerDescription && lowerDescription.includes(word)))\r\n      );\r\n\r\n      return lowerQuery && (containsWholeArticle || containsBothWords);\r\n    });\r\n  \r\n    setSearchResults(filteredResults);\r\n  }, [query]);\r\n\r\n  // Количество позиций в корзине\r\n  let itemsAmount = '';\r\n  const itemCount = searchResults.length;\r\n  \r\n  // Функция для определения окончания числа\r\n  const getEnding = num => {\r\n    const strNum = num.toString();\r\n    const lastDigit = parseInt(strNum.charAt(strNum.length - 1));\r\n  \r\n    if (num === 1 || (num > 20 && lastDigit === 1)) {\r\n      return '';\r\n    // eslint-disable-next-line no-mixed-operators\r\n    } else if (num > 1 && num < 5 || (num > 20 && lastDigit > 1 && lastDigit < 5)) {\r\n      return 'а';\r\n    } else {\r\n      return 'ов';\r\n    }\r\n  };\r\n  \r\n  if (itemCount === 1 || (itemCount > 20 && parseInt(itemCount.toString().charAt(itemCount.toString().length - 1)) === 1)) {\r\n    itemsAmount = `Найден ${itemCount} товар`;\r\n  } else {\r\n    const ending = getEnding(itemCount);\r\n    itemsAmount = `Найдено ${itemCount} товар${ending}`;\r\n  }\r\n  \r\n  return (\r\n    <section className={c.searchResults}>\r\n      <div className={`${c.searchResults__container} container`}>\r\n      <BreadcrumbsComponent pageName={'Поиск'} />\r\n        <h2 className={c.searchResults__title}>{itemsAmount} по запросу '{query}'</h2>\r\n        <div className={c.searchResults__innerContainer}>\r\n          {searchResults.length > 0 && searchResults.map((item, index) => <BadgedProductCard item={{...item}} key={index} />)}\r\n        </div>\r\n        {searchResults.length === 0 && (\r\n          <div className={c.empty}>\r\n            <div className={c.empty__imageWrapper}>\r\n              <img width={200} src={EMPTY_IMAGE} alt=\"Пустая страница\" />\r\n            </div>\r\n            <span className={c.empty__text}>По вашему запросу ничего не найдено</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <FloatButtonComponent />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default SearchResultsPage;"],"names":["allData","concat","_toConsumableArray","animationData","commercialData","balloonsData","photozoneData","location","useLocation","query","URLSearchParams","search","get","_useState","useState","_useState2","_slicedToArray","searchResults","setSearchResults","useEffect","window","scrollTo","top","behavior","lowerQuery","toLowerCase","words","split","filteredResults","filter","item","article","title","description","lowerTitle","lowerDescription","containsWholeArticle","some","word","length","containsBothWords","includes","itemsAmount","itemCount","parseInt","toString","charAt","ending","num","strNum","lastDigit","getEnding","_jsxs","className","c","children","_jsx","BreadcrumbsComponent","pageName","map","index","BadgedProductCard","_objectSpread","width","src","EMPTY_IMAGE","alt","FloatButtonComponent"],"sourceRoot":""}